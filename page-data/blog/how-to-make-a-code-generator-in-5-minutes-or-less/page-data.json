{"componentChunkName":"component---src-components-blog-page-layout-blog-page-layout-tsx","path":"/blog/how-to-make-a-code-generator-in-5-minutes-or-less","result":{"data":{"mdx":{"id":"7b00a4c5-4bce-5abf-92d7-e284c11e9464","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"How to make a code generator in 5 minutes (or less)\",\n  \"description\": \"Every software engineer and every company at some point tries to preserve the knowledge of best practices and know-how-s, in order to prevent making the same mistakes or extra work over and over again. Here is how this problem can be tackled.\",\n  \"keywords\": \"generilla, codegeneration, automation, boilerplate, bootstrap\",\n  \"path\": \"/blog/how-to-make-a-code-generator-in-5-minutes-or-less\",\n  \"date\": \"2020-02-25T00:00:00.000Z\",\n  \"published\": true,\n  \"images\": [{\n    \"author\": \"Karsten Würth\",\n    \"image\": \"/assets/blog/0_FHwtFpDTwNsK_oHe.jpg\",\n    \"sourceText\": \"Unsplash\",\n    \"source\": \"https://unsplash.com/@karsten_wuerth\",\n    \"is_cover\": 1,\n    \"galleryId\": 0\n  }]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Hey, fellas:) Today we talk about how we can benefit from code generation.\"), mdx(\"h2\", null, \"Why {a}\"), mdx(\"h3\", null, \"Allows re-using best practices {a}\"), mdx(\"p\", null, \"Every software engineer and every company at some point tries to preserve the knowledge of best practices and know-how-s, in order to prevent making the same mistakes or extra work over and over again.\"), mdx(\"p\", null, \"I was thinking about this problem as well, so during my career, I have tried:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"writing knowledge base articles,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"saving snippets of code somewhere (files on a cloud drive, bash aliases or live templates in my favorite IDE),\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"heavily abusing object-oriented paradigm in order to make abstract classes that I could eventually publish as a module, then include them into the application and extend for particular needs,\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"making skeleton applications.\")), mdx(\"p\", null, \"None of these really worked out.\"), mdx(\"h3\", null, \"Code bootstrapping leads to a productivity boost {a}\"), mdx(\"p\", null, \"When using a generator we can really concentrate on what matters, we don\\u2019t waste time coding pure auxiliary code. We also reduce our chances to make a typo and then dance around the problem for quite a while.\"), mdx(\"p\", null, \"By the way, if we take any more or less mature framework, we may notice that they usually already have a scaffolding tool on-board, which really helps to dive into the process faster.\"), mdx(\"h3\", null, \"How {a}\"), mdx(\"p\", null, \"There are lots of tools that allow us to create code generators. This time we will talk about Generilla \\u2014 a simple code generation tool.\"), mdx(\"h2\", null, \"Step 0. Prerequisites {a}\"), mdx(\"p\", null, \"Generilla is written in Node, so the following things should be pre-installed before we begin:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Node\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"NPM or Yarn\")), mdx(\"h2\", null, \"Step 1. Installation {a}\"), mdx(\"p\", null, \"To install the tool globally, just type:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"yarn global add @generilla/cli\\n\")), mdx(\"p\", null, \"If we don\\u2019t want to make it available for every user of this machine, but still globally for us, we can do the following:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"mkdir ~/.node\\nyarn global add @generilla/cli --prefix ~/.node\\nexport PATH=${PATH}:${HOME}/.node/bin\\n\")), mdx(\"h2\", null, \"Step 2. Scaffolding {a}\"), mdx(\"p\", null, \"Go to the folder where we keep our projects and create a generator:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"generilla scaffold\\n\")), mdx(\"p\", null, \"Let\\u2019s give it a name \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-component\"), \", hit Enter and go to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"react-component/\"), \" folder when the generator finishes its work.\"), mdx(\"p\", null, \"There is a folder called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"template/\"), \". Everything inside gets processed by a template engine and copied into the output folder. Remove the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[package_name_kebab]/\"), \" folder (because it is a demo template) and create a new one instead, called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[component_name_pascal]/\"), \".\"), mdx(\"h2\", null, \"Step 3. Template files {a}\"), mdx(\"p\", null, \"In the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"template/[component_name_pascal]/\"), \" folder we create files that later will be transformed into the component code.\"), mdx(\"p\", null, \"The most valuable is a module that exports the component function, called \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[component_name_pascal].tsx\"), \":\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"import React, { FunctionComponent } from 'react';\\n\\nimport {\\n    <%- component_name_pascal %>Container,\\n} from './style';\\n\\nimport { Props } from './type';\\n\\nexport const <%- component_name_pascal %>: FunctionComponent<Props> = ({\\n    children,\\n}) => {\\n    return (\\n        <<%- component_name_pascal %>Container>\\n            {children}\\n        </<%- component_name_pascal %>Container>\\n    );\\n};\\n\")), mdx(\"p\", null, \"\\u2705 In the template files it is allowed to use EJS template syntax, so, for example, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello, <%- component_name %>\"), \" will be translated into \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Hello, Button\"), \".\"), mdx(\"p\", null, \"CSS file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[component_name_pascal]/style.ts\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"import styled from 'styled-components';\\n\\nexport const <%- component_name_pascal %>Container = styled.div`\\n    // style\\n`;\\n\")), mdx(\"p\", null, \"\\u2705 We can add placeholders into file names by using square brackets, like this: \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[component_name].tsx\"), \" Any symbol except \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[a-zA-Z0-9_-\\\\.]\"), \" will be omitted in the value that goes instead of the placeholder.\"), mdx(\"p\", null, \"TS type file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[component_name_pascal]/type.ts\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"import { ReactNode } from 'react';\\n\\nexport interface Props {\\n    children?: ReactNode;\\n}\\n\")), mdx(\"p\", null, \"Every complex component should have tests, that is why we enable tests, by creating \", mdx(\"nobr\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[?use_tests]_test_/[component_name_pascal].test.ts\")), \" file as well.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"import React from 'react';\\nimport { cleanup, render } from '@testing-library/react';\\n\\nimport { <%- component_name_pascal %> } from '../<%- component_name_pascal %>';\\n\\ndescribe('<<%- component_name_pascal %> />', () => {\\n    afterEach(async () => {\\n        cleanup();\\n    });\\n\\n    it('should render itself without errors', async () => {\\n        const { container, getByTestId } = render(\\n            <<%- component_name_pascal %> />,\\n        );\\n\\n        // write more of tests here\\n    });\\n});\\n\")), mdx(\"p\", null, \"\\u2705 It is possible to conditionally omit certain files or sub-folders by adding the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[condition]\"), \" prefix to a name. For example, a folder \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[?use_test][component_name_pascal]/\"), \" will be processed and copied only if use_tests gets evaluated to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"true\"), \".\"), mdx(\"p\", null, \"Just to be cool we can have an index file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"[component_name_pascal]/index.ts\"), \".\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"export * from './<%- component_name_pascal %>';\\n\")), mdx(\"h2\", null, \"Step 4. Generator pipeline {a}\"), mdx(\"p\", null, \"Right next to the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"template/\"), \" folder there is a file named \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"index.js\"), \". This file declares the pipeline of a generator. Let\\u2019s remove everything there and make it from scratch.\"), mdx(\"p\", null, \"So, we need to ask a user to provide a value of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"component_name\"), \" . There is a method to do that \\u2014 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"getQuestions()\"), \" . It returns a structure of questions to be asked. We also need to know component_name_pascal , so we convert component_name to pascal afterward.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-typescript\",\n    \"metastring\": \"jsx\",\n    \"jsx\": true\n  }, \"module.exports.Generator = class Generator {\\n    getName() {\\n        return 'React Component: TypeScript + testing';\\n    }\\n\\n    getQuestions() {\\n        return [\\n            {\\n                message: 'What is the component name?',\\n                name: 'component_name',\\n            },\\n            {\\n                message: 'Add tests?',\\n                type: 'confirm',\\n                name: 'use_tests',\\n                default: true,\\n            },\\n        ];\\n    }\\n\\n    refineAnswers(answers) {\\n        if (this.util.textConverter) {\\n            answers.component_name_pascal = this.util.textConverter.toPascal(\\n                answers.component_name,\\n            );\\n            answers.component_name = this.util.textConverter.toKebab(\\n                answers.component_name,\\n            );\\n        }\\n\\n        return answers;\\n    }\\n};\\n\")), mdx(\"p\", null, \"The format of this structure comes from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/inquirer\"\n  }, \"Inquirer\"), \". Check out \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gannochenko/generilla#generator-lifecycle\"\n  }, \"the readme file of Generilla\"), \" to get more information.\"), mdx(\"h2\", null, \"Step 5. Let\\u2019s run it! {a}\"), mdx(\"p\", null, \"It is time to test the thing out. Just run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"generilla\"), \" without any parameters and select the generator we just created. Awesome. Now we have our react component in the current folder, ready to be used.\"), mdx(\"p\", null, \"Generilla allows creating quite complex generators for your needs. If you have any questions check out \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gannochenko/generilla\"\n  }, \"the documentation\"), \" to find out more.\"), mdx(\"p\", null, \"If you liked Generilla, feel free to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/gannochenko/generilla\"\n  }, \"give some stars to the project at GitHub\"), \"!\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"How to make a code generator in 5 minutes (or less)","date":"2020-02-25T00:00:00.000Z","updatedAt":null,"keywords":"generilla, codegeneration, automation, boilerplate, bootstrap","description":"Every software engineer and every company at some point tries to preserve the knowledge of best practices and know-how-s, in order to prevent making the same mistakes or extra work over and over again. Here is how this problem can be tackled.","published":true,"images":[{"image":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='267'%20viewBox='0%200%20400%20267'%20preserveAspectRatio='none'%3e%3cpath%20d='M0%2068v67h3l18-3a431%20431%200%200161%200%20322%20322%200%2001-1%2051c0%202-44%201-48%200-4-3-14-3-15%200%200%202-1%201-5-1-2-3-2-3-3-1l-3%201c-1-1-2%200-2%201H2c-2-1-2-1-2%2041v43h401v-41c0-43%200-48-3-48l-1-1-3-2c-3-1-3-1-6%201-4%203-3%202-80%204l-60%202h-10v-13c0-12%200-13%202-12l1%201-1-3c-2-1-2-7-1-11%202-5%203-6%206-4%202%203%2013%204%2012%201%200-1%204-2%205-1l1%201c-4%200%203%203%206%203h10c6%200%208%202%204%203-2%201%200%203%205%203l7%201c4%202%2011%203%2022%203l13%201c3%202%2016%204%2034%206%204%200%205%201%203%203-3%201-1%203%207%204l9%202%2012%202%205%201v-29l1-87V0H0v68m187%2045l-7%201h-6c-2%201-7%201-11-1l-2%201c0%202-5%206-7%205h-6l-5%201-7%202-9%202a2599%202599%200%2001-19%204c-4%200-5%201-6%202h-3l-2%201-1%201c-1-1-1%200-1%202v3l-1-3c0-2-1-3-1-1l2%2011c3%2011%202%2012-1%202-2-8-5-14-5-12l-1%201c-2-1-4%2046-2%2048%201%202%2025%201%2026-1h1c0%202%201%202%203%202h4v-19c0-12%200-18-1-17s-1%201-1-2c1-3%200-4-4-9l-5-7%207%207c1%202%203%204%205%204l2%202-1%2021-1%2020h11a458%20458%200%200149%206l-1%202c0%202-2%203-3%204-3%201-3%202%204%202s12%202%207%202c-2%200-2%200%200%201s3%201%203-1c1-5%204-4%206%200%201%203%202%204%205%204%204%201%205%200%204-3l2-2c1%200%202-1%201-2-1-4-1-5%201-5h4c3%201%207-1%204-3v-2c0-1%201-2%206-2%207%200%2011-1%2010-2l1-1c2%200%202-2%202-15%200-16%200-16-5-15l-5%201c-2%200-1-1%201-1%207-2%208-3%2010-9%202-7%203-7%205-6l4%201c1%202%204%202%207%201%203%200%203-2%200-2-3-1-3-4%201-4l2%201-1%201-1%201h9l-1-1-2-1%202-1%202-1-3-1c-1%200-2%200-1-1%200-2%204-1%207%201l4%201c1-1%201-1-1-2-3-2-12-3-13-2l-8%201-3-1c-2%200-3%200-3-3%200-2%200-2-4-3l-6-1-5-2-6-3c-3-2-7-3-13-2h-2v-2l-1%201c0%202-11%201-15-1l-5%201'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.497584541062802,"src":"/static/bd91063f5be17b850b9a97320c796b12/77467/0_FHwtFpDTwNsK_oHe.jpg","srcSet":"/static/bd91063f5be17b850b9a97320c796b12/dece2/0_FHwtFpDTwNsK_oHe.jpg 310w,\n/static/bd91063f5be17b850b9a97320c796b12/fcb16/0_FHwtFpDTwNsK_oHe.jpg 620w,\n/static/bd91063f5be17b850b9a97320c796b12/77467/0_FHwtFpDTwNsK_oHe.jpg 1240w,\n/static/bd91063f5be17b850b9a97320c796b12/b1020/0_FHwtFpDTwNsK_oHe.jpg 1860w,\n/static/bd91063f5be17b850b9a97320c796b12/88564/0_FHwtFpDTwNsK_oHe.jpg 2480w,\n/static/bd91063f5be17b850b9a97320c796b12/de9c6/0_FHwtFpDTwNsK_oHe.jpg 4000w","sizes":"(max-width: 1240px) 100vw, 1240px"}}},"author":"Karsten Würth","source":"https://unsplash.com/@karsten_wuerth","sourceText":"Unsplash","is_cover":1,"galleryId":0}]}}},"pageContext":{"id":"7b00a4c5-4bce-5abf-92d7-e284c11e9464"}},"staticQueryHashes":["1334184578","1334184578","2277278352","2277278352","400101895","400101895"]}